!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";var o=[!1,"Estancos","Librerías","Tiendas de Ropa","Mercados","Joyerías","Discotecas","Bancos","Gasolineras","Centros Comerciales","Industrias"],i=[!1,10,9,8,7,6,5,4,3,2,1],a=[!1,125,250,500,1e3,2e3,4e3,8e3,16e3,32e3,64e3],r=[!1,15,30,60,120,240,480,960,1920,3840,7680],s=[!1,10,9,8,7,6,5,4,3,2,1],l=[!1,15,30,60,120,240,480,960,1920,3840,7680],c={getEdificioName:function(e){return o[e]},edificiosDestruidos:function(e){return i[e]},dineroRobadoEdificios:function(e,t){var n=this.precioEdificio(e,t-i[e]);return t>i[e]&&(t=i[e]),Math.round(n*t/2)},precioEdificio:function(e,t){for(var n=a[e]-2*r[e],o=0;o<=t+1;o++)n+=r[e]*Math.ceil(o/s[e]+1e-16);return n},precioRecuperacion:function(e,t){var n=0,o=t;do{n+=this.precioEdificio(e,t--)}while(o-t<this.edificiosDestruidos(e));return n},infoOptimizarNegocio:function(e,t){t=parseInt(t);for(var n=0,o=1;o<e.length;o++)n+=l[o]*e[o];return{payback:this.puntuar(t/n),ingresosGanados:this.puntuar(n)}},puntuar:function(e){for(var t=e=Math.round(10*parseFloat(e))/10+"",n=/(\d+)(\d{3})/;n.test(t);)t=t.replace(n,"$1.$2");return t},redoTooltips:function(){$(".toolTip").hover(function(){var e=$(this).attr("data");$(this).data("tipText",e).removeAttr("data"),$('<div class="masterTooltip">').text(e).appendTo("body").fadeIn("fast")},function(){$(this).attr("data",$(this).data("tipText")),$(".masterTooltip").remove()}).mousemove(function(e){$(".masterTooltip").css({top:e.pageY+10,left:e.pageX+0})})}};e.exports=c},function(e,t,n){"use strict";var o,i=n(0),a=(o=i)&&o.__esModule?o:{default:o};e.exports={init:function(){for(var e=document.querySelectorAll(".reporteMision"),t=0;t<e.length;t++){var n=document.createElement("div"),o=this.getBuildings(e[t]);n.innerHTML="\n\t\t\t<span style='cursor: pointer; color: blue; text-decoration: underline;' class='showInsights'>+ Info</span>\n\t\t\t<div class='insights' style='display:none;'>"+this.calcProfit(o)+"</div>\n\t\t\t",e[t].parentNode.insertBefore(n,e[t].parentNode.childNodes[2]),e[t].parentNode.removeChild(e[t].parentNode.childNodes[3]),t==e.length-1&&function(){for(var e=document.querySelectorAll(".showInsights"),t=function(t){e[t].addEventListener("click",function(){"none"==e[t].parentNode.querySelector(".insights").style.display?(e[t].innerHTML="- Info",e[t].parentNode.querySelector(".insights").style.display="block"):(e[t].innerHTML="+ Info",e[t].parentNode.querySelector(".insights").style.display="none")})},n=0;n<e.length;n++)t(n)}()}},getBuildings:function(e){var t=e.querySelector(".boton").parentNode.innerHTML.split("</div>")[1].split("<br>");return t=t.map(function(e){var t=e.split(" ");return parseInt(t[t.length-1])})},calcProfit:function(e){for(var t=[],n=0;n<e.length;n++){var o=a.default.dineroRobadoEdificios(n+1,e[n]);o+""!="NaN"&&t.push({id:n,nombre:a.default.getEdificioName(n+1),robado:o,recuperacion:a.default.precioRecuperacion(n+1,e[n])})}var i=t.reduce(function(e,t){return e.robado>t.robado?e:t}),r="";return t.forEach(function(e){r+="<br/>",i.id===e.id?r+="<b><u>"+e.nombre+"</u></b>":r+="<u>"+e.nombre+"</u>",r+=": ganas <b>"+a.default.puntuar(e.robado)+"</b> &euro; y el coste de recuperación es de <u>"+a.default.puntuar(e.recuperacion)+"</u> &euro;."}),r}}},function(e,t,n){"use strict";n(3);var o=c(n(4)),i=c(n(5)),a=c(n(7)),r=c(n(8)),s=c(n(9)),l=c(n(10));function c(e){return e&&e.__esModule?e:{default:e}}document.querySelector(".chatMC")&&s.default.init();var d=window.mmm_settings,u=d.advanced_devMode?"dev":"production";console.log("Mega Megamagnate "+d.version+" ("+u+" mode) is loaded"),window.formatNumber=function(e){var t=new window.NumberFormat;return t.setInputDecimal("."),t.setNumber(e),t.setPlaces("0",!1),t.setCurrencyValue(""),t.setCurrency(!0),t.setCurrencyPosition(t.RIGHT_OUTSIDE),t.setNegativeFormat(t.LEFT_DASH),t.setNegativeRed(!0),t.setSeparators(!0,".","."),t.toFormatted()},d.general_playButton||$('.trozoLogin a[href="https://play.google.com/store/apps/details?id=net.megamagnate"]').hide(),d.general_moneyTimer&&($(".cajaDinero").css("font-family","monospace").prepend('<span style="font-size: 0.225em;color:#aaa;"></span>'),$("#cajetoDinero").css("font-size","0.85em").html(window.formatNumber(window.dinero)),$("#cajetoDinero").attr("data")&&setInterval(function(){var e,t=parseInt($("#cajetoDinero").attr("data").split(":")[1].split(".").join("")),n=parseFloat($("#alsegundo").html()),o=(t-window.dinero)/n;o>0?$(".cajaDinero>span:first").html((e=parseInt(o,10),[Math.floor(e/3600),Math.floor(e/60)%60,e%60].map(function(e){return e<10?"0"+e:e}).filter(function(e,t){return"00"!==e||t>0}).join(":")+" hasta llenado")):$(".cajaDinero>span:first").html("Lleno")},500));try{!function(e){switch(e[0]){case"buildings":o.default.init();break;case"casino":"play"===e[1]?i.default.init():"hilo"===e[1]&&a.default.init();break;case"messages":"inbox"===e[1]&&r.default.init();break;case"heroes":l.default.init()}}(window.location.pathname.split("/").splice(1))}catch(e){console.error(e)}$(".menuOpciones:last").append('\n<a target="_blank" href="https://discord.gg/juYwrx5"><p>\n  - Discord <img src="https://discordapp.com/assets/1c8a54f25d101bdc607cec7228247a9a.svg" style="\n  width: 1em;\n  height: 1em;\n  margin: 0 0.2em;\n  vertical-align: middle;"/> (no oficial)\n</p></a>\n'),window.mmm_settings=void 0},function(e,t,n){"use strict";Function.prototype.clone=function(){var e=this,t=function(){return e.apply(this,arguments)};for(var n in this)this.hasOwnProperty(n)&&(t[n]=this[n]);return t}},function(e,t,n){"use strict";var o,i=n(0),a=(o=i)&&o.__esModule?o:{default:o};e.exports={calcNewInfo:function(){var e=[!1];$(".tablaContenido2 tr").each(function(){if($(this).attr("id")&&-1!==$(this).attr("id").indexOf("cachoEdificio")){if(!$(this).find(".mainContent").length){var t=$("<div></div>").css("text-align","center").css("padding","0 0.5em");t.append($(this).find(".imageListadoDiv").css("margin-bottom","0").css("margin-right","0").css("background-repeat","no-repeat").css("float","none").prop("outerHTML")),t.append($(this).find("p a").css("margin-top","0.75em").css("float","none")),$(this).find("td .imageListadoDiv").remove(),$(this).find("td p a").parent().remove();var n=$('<div class="mainContent"></div>').html($(this).find("td").html());$(this).find("td").empty().css("display","flex").css("flex-direction","row").append(t).append(n).appendTo(this),$(this).find("br").last().before('<br><p style="display:inline" title="Dinero que recibe el atacante por atacar este edificio">- Dinero para atacante: <span class="dinero_para_atacante"></span></p>').before('<br><p style="display:inline" title="Días hasta recuperar inversión">- Pay back: <span class="payback"></span></p>')}var o=parseInt($(this).attr("id").replace("cachoEdificio","")),i=parseInt($("#ped"+o).html().split(".").join("")),r=parseInt($("#ned"+o).html().split(".").join(""));e.push(r);var s=parseInt($(this).text().split(": +")[2].split("\n")[0].split(".").join("")),l=a.default.dineroRobadoEdificios(o,r);$(this).find(".payback").html(a.default.puntuar(i/s)+" días"),$(this).find(".dinero_para_atacante").html(a.default.puntuar(l))}}),a.default.redoTooltips();var t=$("#precioOptimizarNegocio").val().split(".").join("");if(t){var n=a.default.infoOptimizarNegocio(e,t);$("#ingresosOptimizarNegocio").html(n.ingresosGanados),$("#paybackOptimizarNegocio").html(n.payback+" días")}},init:function(){var e=this,t=window.verificarPrecio.clone();window.verificarPrecio=function(n){e.calcNewInfo(),t(n)},$(".tablaContenido2").last().after('\n\t\t\t<table  class="tablaContenido2" cellspacing="0" cellpadding="0" style="margin-top:15px">\n\t\t\t<tr>\n\t\t\t\t<td class="topTitulo2"> Eficiencia de Optimizar Negocio </td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t\tPrecio de Optimizar Negocio: <input type="text" id="precioOptimizarNegocio" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>\n\t\t\t\t<p style="display:inline" title="Ingresos ganados">- Bºs al dia: <span id="ingresosOptimizarNegocio">?</span></p>\n\t\t\t\t<br>\n\t\t\t\t<p style="display:inline" title="Días hasta recuperar inversión">- Pay back: <span id="paybackOptimizarNegocio">?</span></p>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t</table>\n\t\t'),$("#precioOptimizarNegocio").on("change, input",function(){e.calcNewInfo()}),this.calcNewInfo(),$.ajax({type:"GET",url:"/research"}).done(function(t){$("#precioOptimizarNegocio").val($(t).find("#pskill5").html()),e.calcNewInfo()})}}},function(e,t,n){"use strict";var o,i=n(6),a=(o=i)&&o.__esModule?o:{default:o};var r=window.mmm_settings,s={slowMode:!1,salirEnBote:!1,auto:!0,slowCounter:0,lastTs:1*new Date,lastBote:0,init:function(){a.default.get("monsterMode")&&this.monsterModeInit(),fichas.value=fichas.lastElementChild.value;var e=$('<div style="text-align:center;margin:1em;"></div>').insertBefore("#mensajescasino");$("<button></button>").appendTo(e).click(function(){s.auto=!s.auto,$(this).text(s.auto?"Stop Auto":"Start Auto")}).click(),$("<button></button>").appendTo(e).click(function(){s.slowMode=!s.slowMode,$(this).text(s.slowMode?"Stop SlowMode":"Activar SlowMode")}).click(),$("<button></button>").appendTo(e).click(function(){s.salirEnBote=!s.salirEnBote,$(this).text(s.salirEnBote?"Stop SalirEnBote":"Activar SalirEnBote")}).click(),$('<div style="margin: 1em 0;color:#333;">SlowMode: Si el bote es menor a '+new Intl.NumberFormat("es-ES").format(r.casinos_slowAmount)+", solamente se apuesta cada "+r.casinos_slowTimer+" segundos</div>").appendTo(e),$('<div style="margin: 1em 0;color:#333;">SalirEnBote: Si se reparte un bote, se saldrá automáticamente del casino.</div>').appendTo(e),this.interval()},monsterModeInit:function(){s.slowMode=!0,s.salirEnBote=!0,window.jAlert=function(){},setInterval(function(){document.getElementById("palanca").src==="https://s3.eu-central-1.amazonaws.com/eu.megamagnate/casinos/MMM"+window.tipo_casino+"/palancaon.gif"&&(window.flag=0)},1)},interval:function(){setTimeout(s.interval,50);var e=$(".tablaerror").length>0,t=1*new Date-s.lastTs;if(s.lastTs=1*new Date,!e&&s.auto){if(document.querySelector("#popup_container"))return document.querySelector("div button:first-child").click(),!1;var n,o=parseInt($("#mbote").html().split(".").join(""));if(s.salirEnBote&&o<s.lastBote)return alert("Bote!!"),document.location="/casino/list",void(s.auto=!1);n=s.slowMode&&o<parseInt(r.casinos_slowAmount)?1e3*parseInt(r.casinos_slowTimer):50,s.slowCounter+=t,s.slowCounter>=n&&(s.slowCounter=0,s.lastBote=o,window.apostar())}}};e.exports=s},function(e,t,n){"use strict";var o,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r){var s=!1;if(void 0===(i="function"==typeof(o=r)?o.call(t,n,t,e):o)||(e.exports=i),s=!0,"object"===a(t)&&(e.exports=r(),s=!0),!s){var l=window.Cookies,c=window.Cookies=r();c.noConflict=function(){return window.Cookies=l,c}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}return function t(n){function o(t,i,a){var r;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},o.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{r=JSON.stringify(i),/^[\{\[]/.test(r)&&(i=r)}catch(e){}i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var c in a)a[c]&&(l+="; "+c,!0!==a[c]&&(l+="="+a[c]));return document.cookie=t+"="+i+l}t||(r={});for(var d=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,p=0;p<d.length;p++){var f=d[p].split("="),m=f.slice(1).join("=");this.json||'"'!==m.charAt(0)||(m=m.slice(1,-1));try{var h=f[0].replace(u,decodeURIComponent);if(m=n.read?n.read(m,h):n(m,h)||m.replace(u,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(e){}if(t===h){r=m;break}t||(r[h]=m)}catch(e){}}return r}}return o.set=o,o.get=function(e){return o.call(o,e)},o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(t,n){o(t,"",e(n,{expires:-1}))},o.withConverter=t,o}(function(){})})},function(e,t,n){"use strict";var o=window.mmm_settings;void 0===o.hilo_mereceLaPena&&(o.hilo_mereceLaPena=!0);var i={hi:0,lo:0},a=[];function r(e,t){var n=0,o=0;return a.forEach(function(i,a){var r=i.filter(function(e){return e}).length;o+=r,("hi"===e?a>t:a<t)&&(n+=r)}),n/o*100}function s(){"0"==$("#bote").html()&&function(){a=[];for(var e=0;e<13;e++)a[e]=[!0,!0,!0,!0]}();var e,t,n,o=(e=[84,124],t=$(".hilo").css("background-position").split("px").map(function(e){return parseInt(e)}),13===(n=Math.abs(Math.floor(t[0]/e[0])))&&(n=0),[n,Math.abs(Math.floor(t[1]/e[1]))]);a[o[0]][o[1]]&&(a[o[0]][o[1]]=!1,i.hi=r("hi",o[0]),i.lo=r("lo",o[0]),function(){var e={hi:"color: #222; font-weight: bold;",lo:"color: #222; font-weight: bold;"};i.hi>50?(e.hi="color: limegreen; font-weight: bold;",e.lo="color: orangered; font-weight: normal;"):i.lo>50&&(e.lo="color: limegreen; font-weight: bold;",e.hi="color: orangered; font-weight: normal;");var t={};Object.keys(i).map(function(e){t[e]=Math.floor(100*i[e])/100});var n='\n      <div id="chances" style="margin:0 5px;flex: 1 1;">\n        <div>Hi chances: <span style="'+e.hi+'">'+t.hi+'%</span></div>\n        <div>Lo chances: <span style="'+e.lo+'">'+t.lo+"%</span></div>\n      </div>\n    ";$("#chances").html(n)}())}function l(){i.hi>i.lo?window.playHilo(1):window.playHilo(2)}function c(){window.HiLoAuto=!window.HiLoAuto,$("#auto-boton").html(window.HiLoAuto?"Stop Auto":"Start Auto")}e.exports={init:function(){$(".cajaHilo").css("height","auto").css("flex","1 0").parent().css("display","flex"),$('<a class="boton" style="width: 100px">La más probable</a><br><br>').insertBefore("#endGame").click(l),$('<a id="auto-boton" class="boton" style="width: 100px;"></a><br><br>').prependTo(".cajaHilo").click(c),$("<div id='chances'></div>").insertAfter(".cajaHilo"),$("<span style='margin: 1em 0;color:#333;'>Modo Auto: Seguirá apostando mientras no llegues a la cantidad objetivo "+new Intl.NumberFormat("es-ES").format(o.hilo_exitOn)+"</span><br><span>Sólo si merece la pena: Sólo se continuará apostando si el riesgo de la apuesta no es superior a la máxima recompensa obtenible.</span>").appendTo(".cajaHilo"),$('a[onclick="comienzaJuego()"]').attr("onclick","comienzaJuegoSinConfirmar()"),$("#endGame").attr("onclick","playHilo(3)"),$("#jugadaspendientes").parents(".tablaContenido2").last().after('<div id="HiLoHelper"></div>'),$("#HiLoHelper").html('<a href="https://wizardofodds.com/games/blackjack/card-counting/high-low/" target="_blank"><img style="width:100%;" src="https://i.imgur.com/4FCUpB1.png"/></a>'),window.comienzaJuegoSinConfirmar=function(){var e=window.confirm;window.confirm=function(){return!0},window.comienzaJuego(),window.confirm=e},window.HiLoAuto=!0,c(),setInterval(function(){if(document.querySelector("#popup_container")&&window.HiLoAuto&&c(),!window.HiLoAuto||window.flagPlaying)return!1;var e="none"!==$("#cajaJugando").css("display"),t="none"===$(".hilo_content").css("display");!e||t?window.comienzaJuegoSinConfirmar():parseInt($("#bote").html().split(".").join(""))<parseInt(o.hilo_exitOn)&&function(){if(!o.hilo_mereceLaPena)return!0;var e=window.parseInt(document.querySelector("#bote").innerHTML.replace(/\./g,"")),t=window.parseFloat(document.querySelector(".comboBox").innerHTML.replace("x",""));return t*e>o.hilo_exitOn&&(t=o.hilo_exitOn/e),i.hi>i.lo?window.parseFloat(i.hi/100*t)>1:window.parseFloat(i.lo/100*t)>1}()?l():window.playHilo(3)},100),$("#bote, #disponible").on("DOMSubtreeModified",s)}}},function(e,t,n){"use strict";var o,i=n(1),a=(o=i)&&o.__esModule?o:{default:o};e.exports={init:function(){a.default.init()}}},function(e,t,n){"use strict";var o,i=n(1),a=(o=i)&&o.__esModule?o:{default:o};e.exports={chatNum:0,time:0,lastChat:"",init:function(){var e=this,t=document.createElement("div");t.id="meinChat",t.innerHTML="<div class='cajaChat' style='overflow-x: hidden;'></div>",t.style.cssText="display: none; position: fixed; bottom: 26px; right: 0px; z-index: 100; background: white; width: 400px; font-family: Arial, sans-serif; font-size: 12px; border: 2px solid black;",document.querySelector("body").appendChild(t),document.querySelector(".chatMC a").addEventListener("click",function(n){n.preventDefault(),"none"==t.style.display?(t.style.display="",e.markAsRead(),e.listenReports(),$("#meinChat .cajaChat").scrollTop($("#meinChat .cajaChat")[0].scrollHeight)):t.style.display="none"});var n=document.createElement("input");n.id="meinInput",n.type="text",n.placeholder="Presiona ENTER para enviar",n.style.width="100%",t.appendChild(n),n.addEventListener("keypress",function(t){13==t.which&&e.say(t.target.value)}),this.fetchChat(),setInterval(function(){return e.fetchChat()},1e4)},fetchChat:function(){var e=this;$.ajax({type:"POST",url:"/petition/megacorp",dataType:"json",data:{event:"getChat",myChat:this.chatNum,myTime:this.time}}).done(function(t){"ok"==t.error&&(t.mensaje!=e.lastChat&&(e.lastChat=t.mensaje,document.querySelector("#meinChat .cajaChat").innerHTML=e.lastChat,$("#meinChat .cajaChat").scrollTop($("#meinChat .cajaChat")[0].scrollHeight)),e.chatNum=t.chatNum,e.time=t.time)})},say:function(e){var t=this;$.ajax({type:"POST",url:"/petition/megacorp",dataType:"json",data:{event:"sendChat",txt:e}}).done(function(e){if("ok"!=e.error)return!1;$("#meinInput").val(""),$("#meinChat .cajaChat").append(e.mensaje),$("#meinChat .cajaChat").scrollTop($("#meinChat .cajaChat")[0].scrollHeight),t.chatNum=e.chatNum,t.time=e.time})},markAsRead:function(){var e=new XMLHttpRequest;e.open("GET","https://www.megamagnate.net/megacorp/chat"),e.send(),document.querySelector(".menuCabecera").innerHTML="Chat Alianza"},listenReports:function(){for(var e=document.querySelector("#meinChat").querySelectorAll(".manual-ajax"),t=function(e){e.preventDefault(),$.get(e.target.href,function(e){$(e).appendTo("body").modal(),a.default.init()})},n=0;n<e.length;n++)e[n].addEventListener("click",t)}}},function(e,t,n){"use strict";e.exports={init:function(){var e=this;this.costes=[[80,100,150],[80,100,100],[100,200,200]],this.leaderID=window.parseInt(document.querySelectorAll("[onclick*=infoh]")[0].getAttribute("onclick").substring(document.querySelectorAll("[onclick*=infoh]")[0].getAttribute("onclick").indexOf("useSkill(")+9,document.querySelectorAll("[onclick*=infoh]")[0].getAttribute("onclick").indexOf(");")).split(",")[0]),this.lvl=window.parseInt(document.querySelector(".tablaContenido2:not(.tablaok)").innerHTML.match(/(Lvl)+\s+[0-9]{1,4}/g)[0].replace("Lvl ","")),this.heroType=window.parseInt(document.querySelector("#habilidad1").src.substring(document.querySelector("#habilidad1").src.indexOf(".gif")-3,document.querySelector("#habilidad1").src.indexOf(".gif")-2)),this.energy=window.parseInt(document.querySelector("#energia_left").innerHTML),this.exp=window.parseInt(document.querySelector("#puntos_left").innerHTML),this.maxEnergy=window.parseInt(document.querySelector("#energia_maxima").innerHTML),this.maxExp=window.parseInt(document.querySelector("#puntos_left").parentNode.innerHTML.substring(document.querySelector("#puntos_left").parentNode.innerHTML.indexOf("/")+8).trim()),new MutationObserver(function(){var t=window.parseInt(document.querySelector("[onclick^=useSkill]").getAttribute("onclick").split(",")[1].replace(");",""));if(!document.querySelector("#useAll")&&3!=e.heroType&&2==t){var n=document.createElement("a");n.className="boton",n.id="useAll",n.style.display="block",n.style.textAlign="center",n.innerText="Activar todo",n.addEventListener("click",function(){e.useAll()}),document.querySelector("#infoh2").appendChild(n)}}).observe(document.querySelector("#infoh2"),{subtree:!0,childList:!0}),window.useSkill=function(t,n){$.ajax({type:"POST",url:"/petition/lideres",dataType:"json",data:{event:"useSkill",idl:t,skill:n}}).done(function(t){if(""!=t.url){e.doItDad(n);var o=void 0;o=1==e.heroType?1==n?"+"+20*e.lvl+" fuerza":2==n?"+"+(100+5*e.lvl)+" saboteadores":"+1 sabotaje":2==e.heroType?1==n?"+"+20*e.lvl+" defensa":2==n?"+"+(500+10*e.lvl)+" guardias":"+1 seguridad":1==n?"Herida Letal ON":2==n?"+Regeneración Rápida":"+Pierde Mitad de Vida",e.msg(o,e.costes[e.heroType-1][n-1])}else window.jAlert(t.mensaje,"Lideres")})}},useAll:function(){var e=this,t=window.parseInt(window.parseInt(document.querySelector("#energia_left").innerHTML)/100);if(t<1)return!1;for(var n=[],o=0;o<t;o++)n.push(new Promise(function(t){$.ajax({type:"POST",url:"/petition/lideres",dataType:"json",data:{event:"useSkill",idl:e.leaderID,skill:2}}).done(function(){e.doItDad(2),t()})}));Promise.all(n).then(function(){2==e.heroType?e.msg("+"+t*(500+10*e.lvl)+" guardias",t*e.costes[e.heroType-1][1]):e.msg("+"+t*(100+5*e.lvl)+" saboteadores",t*e.costes[e.heroType-1][1])})},doItDad:function(e){var t=this;if(this.energy-=this.costes[this.heroType-1][e-1],this.exp+=this.costes[this.heroType-1][e-1],this.exp>=this.maxExp){this.lvl++,this.exp-=this.maxExp,this.maxExp+=1e3,this.msg("Tu héroe ha subido al nivel "+this.lvl+"!"),document.querySelector("#puntos_restantes").innerHTML=window.parseInt(document.querySelector("#puntos_restantes").innerHTML)+10,document.querySelector("#puntos_left").parentNode.innerHTML=document.querySelector("#puntos_left").parentNode.innerHTML.replace("/ "+this.maxExp,"/ "+(this.maxExp+1e3));for(var n=function(e){document.querySelector("#sn"+e).className="",document.querySelector("#sn"+e).addEventListener("click",function(){if(window.parseInt(document.querySelector("#puntos_restantes").innerHTML)>0)window.subir_puntos(e,t.leaderID),document.querySelector("#puntos_restantes").innerHTML=window.parseInt(document.querySelector("#puntos_restantes").innerHTML)-1;else for(var n=1;n<=document.querySelectorAll("[id^=sn]").length;n++)document.querySelector("#sn"+n).className="transparente",document.querySelector("#sn"+n).addEventListener("click",function(e){return e.preventDefault()})})},o=1;o<=document.querySelectorAll("[id^=sn]").length;o++)n(o)}document.querySelector("#barra_energia").style.width=this.energy/this.maxEnergy*109+"px",document.querySelector("#barra_experiencia").style.width=this.exp/this.maxExp*109+"px",document.querySelector("#energia_left").innerHTML=this.energy,document.querySelector("#puntos_left").innerHTML=this.exp},msg:function(e,t){var n=document.querySelectorAll(".infoDiv").length+1,o=document.createElement("div");o.className="infoDiv",o.style.cssText="display: none; position: fixed; border: 1px solid rgba(255, 255, 255, .1); border-radius: 3px; top: "+(window.innerHeight-70*n)+"px; left: 10px; background: #333; font-size: 11px; font-family: 'Arial'; padding: 10px 15px;",o.innerHTML="\n      <span style='color: lightgreen; font-weight: bold; font-size: 13px;'>"+e+"</span>\n    ",t&&(o.innerHTML+="\n      <br><span style='color: red;'>-"+t+" Energía</span><br>\n      <span style='color: yellow;'>+"+t+" EXP</span>\n    "),document.querySelector("body").appendChild(o),$(".infoDiv").fadeIn(),window.setTimeout(function(){$(".infoDiv").fadeOut(1e3,function(){o.remove()})},3e3)}}}]);